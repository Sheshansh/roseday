<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Happy Rose Day ðŸŒ¹</title>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:ital@1&display=swap" rel="stylesheet"/>
  <style>
    *, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }

    body {
      overflow-x: hidden;
      background: #0a0000;
      font-family: 'Playfair Display', serif;
    }

    .scroll-spacer { height: 700vh; }

    /* ===== FIXED SCENE ===== */
    .scene {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      display: flex; align-items: center; justify-content: center;
      overflow: hidden;
    }

    .bg {
      position: absolute; inset: 0;
      background: radial-gradient(ellipse at 50% 50%, #1a0508, #0a0000);
    }

    .vignette {
      position: absolute; inset: 0;
      box-shadow: inset 0 0 200px rgba(0,0,0,0.8);
      pointer-events: none; z-index: 100;
    }

    /* ===== SVG ROSE ===== */
    #roseSvg {
      width: min(75vw, 75vh, 480px);
      height: auto;
      z-index: 10;
      transition: opacity 1s, transform 1s;
    }

    /* ===== SCROLL HINT ===== */
    .scroll-hint {
      position: fixed; bottom: 40px; left: 50%;
      transform: translateX(-50%);
      z-index: 200; text-align: center;
      color: rgba(255,180,190,0.7);
      font-style: italic; font-size: 14px; letter-spacing: 2px;
      transition: opacity 0.8s;
    }
    .scroll-hint .arrow {
      display: block; margin: 8px auto 0;
      width: 20px; height: 20px;
      border-right: 2px solid rgba(255,180,190,0.5);
      border-bottom: 2px solid rgba(255,180,190,0.5);
      transform: rotate(45deg);
      animation: bounce 2s ease infinite;
    }
    @keyframes bounce {
      0%,100% { transform: rotate(45deg) translateY(0); }
      50% { transform: rotate(45deg) translateY(8px); }
    }

    /* ===== MESSAGE ===== */
    .message {
      position: fixed; top: 0; left: 0;
      width: 100vw; height: 100vh;
      display: flex; flex-direction: column;
      align-items: center; justify-content: center;
      z-index: 50; pointer-events: none;
      opacity: 0; transition: opacity 1.5s;
    }
    .message.show { opacity: 1; pointer-events: auto; }

    .message-img {
      width: 320px; height: 320px;
      border-radius: 50%; object-fit: cover; object-position: center 25%;
      border: 4px solid rgba(255,100,130,0.5);
      box-shadow: 0 0 40px rgba(200,30,60,0.4), 0 0 80px rgba(200,30,60,0.15);
      margin-bottom: 30px;
      opacity: 0; transform: scale(0.5);
      transition: opacity 1s 0.3s, transform 1s cubic-bezier(0.34,1.56,0.64,1) 0.3s;
    }
    .message.show .message-img { opacity: 1; transform: scale(1); }

    .message h1 {
      font-family: 'Great Vibes', cursive;
      font-size: clamp(48px, 8vw, 96px);
      background: linear-gradient(135deg, #ff6b88, #ff2255, #ff8fa8, #ff2255);
      background-size: 300% 300%;
      -webkit-background-clip: text; background-clip: text;
      color: transparent;
      animation: shimmer 4s ease infinite;
      filter: drop-shadow(0 2px 10px rgba(255,50,80,0.4));
      opacity: 0; transform: translateY(20px);
      transition: opacity 1.2s 0.7s, transform 1.2s 0.7s;
    }
    .message.show h1 { opacity: 1; transform: translateY(0); }

    @keyframes shimmer {
      0%   { background-position: 0% 50%; }
      50%  { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .message p {
      font-style: italic;
      color: rgba(255,180,190,0.8);
      font-size: clamp(14px, 2vw, 20px);
      margin-top: 15px; letter-spacing: 3px;
      opacity: 0; transition: opacity 1.5s 1.2s;
    }
    .message.show p { opacity: 1; }

    /* ===== PARTICLES ===== */
    .particle {
      position: fixed; border-radius: 50%;
      pointer-events: none; z-index: 5;
      animation: floatUp linear infinite;
    }
    @keyframes floatUp {
      0%   { transform: translateY(100vh) scale(0); opacity: 0; }
      10%  { opacity: 0.5; transform: translateY(90vh) scale(1); }
      90%  { opacity: 0.15; }
      100% { transform: translateY(-10vh) scale(0.3); opacity: 0; }
    }

    /* ===== SPARKLES ===== */
    .sparkle {
      position: fixed;
      width: 4px; height: 4px;
      background: #fff; border-radius: 50%;
      pointer-events: none; z-index: 15;
      box-shadow: 0 0 6px 2px rgba(255,200,210,0.8);
      animation: twinkle ease-in-out infinite;
      display: none;
    }
    @keyframes twinkle {
      0%, 100% { opacity: 0; transform: scale(0); }
      50% { opacity: 1; transform: scale(1); }
    }

    /* ===== FALLING PETALS ===== */
    .fall-petal {
      position: fixed; pointer-events: none;
      z-index: 45; opacity: 0;
    }

    /* ===== BLOOM CAPTION ===== */
    .bloom-caption {
      position: fixed;
      bottom: 60px; left: 0; width: 100%;
      text-align: center;
      z-index: 20;
      pointer-events: none;
      opacity: 0;
      transition: opacity 1.2s ease;
    }
    .bloom-caption span {
      font-family: 'Great Vibes', cursive;
      font-size: clamp(22px, 4vw, 36px);
      color: rgba(255, 170, 185, 0.85);
      filter: drop-shadow(0 0 12px rgba(200, 40, 70, 0.35));
      letter-spacing: 1px;
    }

    @media (max-width: 600px) {
      #roseSvg { width: 90vw; }
    }
  </style>
</head>
<body>

  <div class="scroll-spacer"></div>

  <div class="scene">
    <div class="bg" id="bg"></div>
    <div class="vignette"></div>

    <svg id="roseSvg" viewBox="-170 -170 340 400" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <radialGradient id="gc" cx="40%" cy="40%">
          <stop offset="0%" stop-color="#b83848"/>
          <stop offset="100%" stop-color="#6b1020"/>
        </radialGradient>
        <radialGradient id="g1" cx="45%" cy="35%" r="70%">
          <stop offset="0%" stop-color="#cc4860"/>
          <stop offset="100%" stop-color="#8b1a2b"/>
        </radialGradient>
        <radialGradient id="g2" cx="45%" cy="35%" r="70%">
          <stop offset="0%" stop-color="#dd5870"/>
          <stop offset="100%" stop-color="#a82238"/>
        </radialGradient>
        <radialGradient id="g3" cx="45%" cy="35%" r="70%">
          <stop offset="0%" stop-color="#ee6878"/>
          <stop offset="100%" stop-color="#c0283a"/>
        </radialGradient>
        <radialGradient id="g4" cx="45%" cy="35%" r="70%">
          <stop offset="0%" stop-color="#f88090"/>
          <stop offset="100%" stop-color="#d63050"/>
        </radialGradient>
        <radialGradient id="g5" cx="45%" cy="35%" r="70%">
          <stop offset="0%" stop-color="#ffa0b0"/>
          <stop offset="100%" stop-color="#e84868"/>
        </radialGradient>
        <linearGradient id="stemGrad" x1="0" y1="0" x2="0" y2="1">
          <stop offset="0%" stop-color="#2d8a2d"/>
          <stop offset="100%" stop-color="#1a5c1a"/>
        </linearGradient>
        <radialGradient id="leafGrad" cx="30%" cy="30%">
          <stop offset="0%" stop-color="#3a9e3a"/>
          <stop offset="100%" stop-color="#1a5c1a"/>
        </radialGradient>
        <!-- Glow filter -->
        <filter id="roseGlow" x="-50%" y="-50%" width="200%" height="200%">
          <feGaussianBlur in="SourceGraphic" stdDeviation="0" result="blur"/>
          <feMerge>
            <feMergeNode in="blur"/>
            <feMergeNode in="SourceGraphic"/>
          </feMerge>
        </filter>
      </defs>
    </svg>

    <div class="message" id="msg">
      <img class="message-img" src="picture.png" alt="Happy Rose Day"/>
      <h1>Happy Rose Day, Rashika!</h1>
      <p>with love, forever &amp; always â™¥</p>
    </div>
  </div>

  <div class="bloom-caption" id="bloomCaption">
    <span>Like this rose, my love for you grows â€” petal by petal, endlesslyâ€¦</span>
  </div>

  <div class="scroll-hint" id="hint">
    scroll gently to bloom
    <span class="arrow"></span>
  </div>

  <script>
    const NS = 'http://www.w3.org/2000/svg';
    const svg = document.getElementById('roseSvg');
    const msg = document.getElementById('msg');
    const hint = document.getElementById('hint');
    const bg = document.getElementById('bg');
    const bloomCaption = document.getElementById('bloomCaption');

    // ===== PETAL PATH: narrow base, wide rounded tip =====
    function petalD(w, h) {
      return [
        `M0,0`,
        `C${-w},${-h*0.35} ${-w},${-h*0.85} ${-w*0.5},${-h}`,
        `Q0,${-h*1.1} ${w*0.5},${-h}`,
        `C${w},${-h*0.85} ${w},${-h*0.35} 0,0Z`
      ].join(' ');
    }

    // Sepal path (green, pointing downward)
    function sepalD(w, h) {
      return `M0,0 C${-w},${h*0.4} ${-w*0.3},${h*0.9} 0,${h} C${w*0.3},${h*0.9} ${w},${h*0.4} 0,0Z`;
    }

    // ===== RING CONFIGURATION =====
    // Drawing order: outermost first (behind) â†’ center last (in front)
    const rings = [
      { n:12, w:32, h:62, off:68, ao:16, grad:'g5', stroke:'#c83850', sw:0.7, sr:[0.52, 0.68] },
      { n:9,  w:28, h:54, off:50, ao:5,  grad:'g4', stroke:'#b82840', sw:0.8, sr:[0.42, 0.58] },
      { n:7,  w:24, h:46, off:34, ao:12, grad:'g3', stroke:'#a02030', sw:0.8, sr:[0.32, 0.48] },
      { n:5,  w:20, h:38, off:20, ao:0,  grad:'g2', stroke:'#881a2e', sw:1.0, sr:[0.22, 0.37] },
      { n:4,  w:16, h:30, off:8,  ao:45, grad:'g1', stroke:'#701525', sw:1.0, sr:[0.12, 0.26] },
      { id:'center', r:16, grad:'gc', stroke:'#5a1020', sw:1.5, sr:[0.06, 0.16] },
    ];

    // ===== BUILD SVG ELEMENTS =====
    const animGroups = []; // { el, sr }

    // --- Stem + Leaves (drawn first = behind everything) ---
    const stemG = document.createElementNS(NS, 'g');
    stemG.style.opacity = '0';

    const stemPath = document.createElementNS(NS, 'path');
    stemPath.setAttribute('d', 'M0,20 Q5,100 -2,180 Q-4,210 0,230');
    stemPath.setAttribute('fill', 'none');
    stemPath.setAttribute('stroke', 'url(#stemGrad)');
    stemPath.setAttribute('stroke-width', '5');
    stemPath.setAttribute('stroke-linecap', 'round');
    stemG.appendChild(stemPath);

    // Thorns
    const thorn1 = document.createElementNS(NS, 'path');
    thorn1.setAttribute('d', 'M1,85 L-9,75 L-1,80Z');
    thorn1.setAttribute('fill', '#2d7a2d');
    stemG.appendChild(thorn1);

    const thorn2 = document.createElementNS(NS, 'path');
    thorn2.setAttribute('d', 'M-1,145 L9,135 L1,140Z');
    thorn2.setAttribute('fill', '#2d7a2d');
    stemG.appendChild(thorn2);

    // Left leaf
    const leaf1 = document.createElementNS(NS, 'path');
    leaf1.setAttribute('d', 'M-1,92 C-20,80 -50,65 -42,48 C-35,58 -15,75 -1,92Z');
    leaf1.setAttribute('fill', 'url(#leafGrad)');
    leaf1.setAttribute('stroke', '#1a5c1a');
    leaf1.setAttribute('stroke-width', '0.8');
    stemG.appendChild(leaf1);

    // Leaf vein
    const vein1 = document.createElementNS(NS, 'path');
    vein1.setAttribute('d', 'M-1,92 Q-25,72 -42,48');
    vein1.setAttribute('fill', 'none');
    vein1.setAttribute('stroke', '#1a5c1a');
    vein1.setAttribute('stroke-width', '0.6');
    stemG.appendChild(vein1);

    // Right leaf
    const leaf2 = document.createElementNS(NS, 'path');
    leaf2.setAttribute('d', 'M1,152 C20,140 50,125 42,108 C35,118 15,135 1,152Z');
    leaf2.setAttribute('fill', 'url(#leafGrad)');
    leaf2.setAttribute('stroke', '#1a5c1a');
    leaf2.setAttribute('stroke-width', '0.8');
    stemG.appendChild(leaf2);

    const vein2 = document.createElementNS(NS, 'path');
    vein2.setAttribute('d', 'M1,152 Q25,132 42,108');
    vein2.setAttribute('fill', 'none');
    vein2.setAttribute('stroke', '#1a5c1a');
    vein2.setAttribute('stroke-width', '0.6');
    stemG.appendChild(vein2);

    svg.appendChild(stemG);

    // --- Sepals (behind outermost petals) ---
    const sepalG = document.createElementNS(NS, 'g');
    sepalG.style.opacity = '0';
    for (let i = 0; i < 5; i++) {
      const angle = 72 * i + 36;
      const p = document.createElementNS(NS, 'path');
      p.setAttribute('d', sepalD(9, 30));
      p.setAttribute('fill', 'url(#leafGrad)');
      p.setAttribute('stroke', '#1a5c1a');
      p.setAttribute('stroke-width', '0.8');
      p.setAttribute('transform', `rotate(${angle}) translate(0, 14)`);
      sepalG.appendChild(p);
    }
    svg.appendChild(sepalG);

    // --- Petal Rings ---
    rings.forEach((ring) => {
      const g = document.createElementNS(NS, 'g');
      g.style.opacity = '0';

      if (ring.id === 'center') {
        // Center bud
        const c = document.createElementNS(NS, 'circle');
        c.setAttribute('cx', 0);
        c.setAttribute('cy', 0);
        c.setAttribute('r', ring.r);
        c.setAttribute('fill', `url(#${ring.grad})`);
        c.setAttribute('stroke', ring.stroke);
        c.setAttribute('stroke-width', ring.sw);
        g.appendChild(c);

        // Inner spiral hint
        const spiral = document.createElementNS(NS, 'path');
        spiral.setAttribute('d', 'M-4,-6 Q0,-12 5,-5 Q8,2 -2,5 Q-8,2 -4,-6');
        spiral.setAttribute('fill', 'none');
        spiral.setAttribute('stroke', 'rgba(0,0,0,0.15)');
        spiral.setAttribute('stroke-width', '1');
        g.appendChild(spiral);
      } else {
        const step = 360 / ring.n;
        for (let j = 0; j < ring.n; j++) {
          const angle = ring.ao + step * j;
          const p = document.createElementNS(NS, 'path');
          p.setAttribute('d', petalD(ring.w, ring.h));
          p.setAttribute('fill', `url(#${ring.grad})`);
          p.setAttribute('stroke', ring.stroke);
          p.setAttribute('stroke-width', ring.sw);
          p.setAttribute('opacity', '0.92');
          p.setAttribute('transform', `rotate(${angle}) translate(0,${-ring.off})`);
          g.appendChild(p);
        }
      }

      svg.appendChild(g);
      animGroups.push({ el: g, sr: ring.sr });
    });

    // ===== FLOATING PARTICLES =====
    for (let i = 0; i < 20; i++) {
      const p = document.createElement('div');
      p.classList.add('particle');
      const size = 2 + Math.random() * 5;
      const hue = 340 + Math.random() * 30;
      p.style.cssText = `width:${size}px;height:${size}px;left:${Math.random()*100}vw;` +
        `background:hsl(${hue},80%,${50+Math.random()*30}%);` +
        `animation-duration:${8+Math.random()*12}s;animation-delay:${Math.random()*15}s;`;
      document.body.appendChild(p);
    }

    // ===== SPARKLES =====
    const sparkles = [];
    for (let i = 0; i < 12; i++) {
      const s = document.createElement('div');
      s.classList.add('sparkle');
      s.style.left = (35 + Math.random() * 30) + 'vw';
      s.style.top = (20 + Math.random() * 55) + 'vh';
      s.style.animationDelay = (Math.random() * 4) + 's';
      s.style.animationDuration = (2 + Math.random() * 3) + 's';
      document.body.appendChild(s);
      sparkles.push(s);
    }

    // ===== FALLING PETALS (for end) =====
    const fallPetals = [];
    for (let i = 0; i < 15; i++) {
      const fp = document.createElement('div');
      fp.classList.add('fall-petal');
      const hue = 345 + Math.random() * 20;
      const sz = 15 + Math.random() * 20;
      fp.innerHTML = `<svg width="${sz}" height="${sz}" viewBox="0 0 30 40">` +
        `<path d="M15,0 C5,10 0,20 5,35 Q15,42 25,35 C30,20 25,10 15,0Z" ` +
        `fill="hsl(${hue},${70+Math.random()*20}%,${40+Math.random()*25}%)" opacity="0.8"/></svg>`;
      fp.style.left = Math.random() * 100 + 'vw';
      fp.dataset.delay = (i * 0.04).toFixed(3);
      fp.dataset.speed = (3 + Math.random() * 4).toFixed(2);
      fp.dataset.sway = (40 + Math.random() * 80).toFixed(1);
      document.body.appendChild(fp);
      fallPetals.push(fp);
    }

    // ===== HELPERS =====
    function clamp(v, a, b) { return Math.max(a, Math.min(b, v)); }
    function ease(t) { return t < 0.5 ? 4*t*t*t : 1 - Math.pow(-2*t + 2, 3) / 2; }
    function lerp(a, b, t) { return a + (b - a) * t; }

    // ===== SCROLL ANIMATION =====
    const glowFilter = svg.querySelector('#roseGlow feGaussianBlur');
    let ticking = false;

    function onScroll() {
      if (!ticking) { requestAnimationFrame(update); ticking = true; }
    }

    function update() {
      ticking = false;
      const scrollTop = window.pageYOffset;
      const maxScroll = document.documentElement.scrollHeight - window.innerHeight;
      const p = clamp(scrollTop / maxScroll, 0, 1);

      // --- Scroll hint fade ---
      hint.style.opacity = p < 0.04 ? 1 : Math.max(0, 1 - (p - 0.04) / 0.04);

      // --- Petal ring animation (opacity + scale from center) ---
      animGroups.forEach(({ el, sr }) => {
        const t = ease(clamp((p - sr[0]) / (sr[1] - sr[0]), 0, 1));
        el.style.opacity = t;
        // Scale petals from center using SVG transform
        const sc = lerp(0.3, 1, t);
        el.setAttribute('transform', `scale(${sc})`);
      });

      // --- Sepals ---
      const sepalT = ease(clamp((p - 0.55) / 0.15, 0, 1));
      sepalG.style.opacity = sepalT;
      sepalG.setAttribute('transform', `scale(${lerp(0.5, 1, sepalT)})`);

      // --- Stem + leaves ---
      const stemT = ease(clamp((p - 0.50) / 0.20, 0, 1));
      stemG.style.opacity = stemT;

      // --- SVG glow effect ---
      const glowP = clamp((p - 0.3) / 0.4, 0, 1);
      const blurVal = glowP * 6;
      glowFilter.setAttribute('stdDeviation', blurVal.toFixed(1));
      svg.style.filter = `drop-shadow(0 0 ${Math.round(glowP * 35)}px rgba(200,40,70,${(glowP*0.35).toFixed(2)}))`;

      // --- Background warmth ---
      const w = clamp(p / 0.7, 0, 1);
      const br = Math.round(lerp(10, 35, w));
      bg.style.background = `radial-gradient(ellipse at 50% 50%, ` +
        `rgb(${br*2},${Math.round(br*0.2)},${Math.round(br*0.4)}), rgb(${br},0,0))`;

      // --- Bloom caption (visible during petal growth, fades before message) ---
      let captionOpacity = 0;
      if (p >= 0.10 && p < 0.25) {
        captionOpacity = clamp((p - 0.10) / 0.10, 0, 1); // fade in
      } else if (p >= 0.25 && p < 0.70) {
        captionOpacity = 1; // fully visible
      } else if (p >= 0.70 && p < 0.80) {
        captionOpacity = clamp(1 - (p - 0.70) / 0.10, 0, 1); // fade out
      }
      bloomCaption.style.opacity = captionOpacity;

      // --- Sparkles ---
      sparkles.forEach(s => {
        s.style.display = (p > 0.45 && p < 0.82) ? 'block' : 'none';
      });

      // --- Message ---
      const msgP = clamp((p - 0.80) / 0.12, 0, 1);
      if (msgP > 0) {
        msg.classList.add('show');
        const fade = clamp((p - 0.82) / 0.10, 0, 1);
        svg.style.opacity = 1 - fade * 0.92;
        svg.style.transform = `scale(${1 + fade * 0.3})`;
      } else {
        msg.classList.remove('show');
        svg.style.opacity = 1;
        svg.style.transform = 'scale(1)';
      }

      // --- Falling petals ---
      fallPetals.forEach(fp => {
        const fStart = 0.85;
        const fP = clamp((p - fStart) / 0.15, 0, 1);
        if (fP > 0) {
          const d = parseFloat(fp.dataset.delay);
          const adj = clamp((fP - d) / (1 - d), 0, 1);
          const speed = parseFloat(fp.dataset.speed);
          const sway = parseFloat(fp.dataset.sway);
          fp.style.opacity = adj > 0.03
            ? (adj < 0.9 ? 0.75 : lerp(0.75, 0, (adj - 0.9) / 0.1).toFixed(2))
            : 0;
          fp.style.top = (adj * 110) + 'vh';
          fp.style.transform = `translateX(${(Math.sin(adj * speed) * sway).toFixed(1)}px) rotate(${(adj * 360).toFixed(0)}deg)`;
        } else {
          fp.style.opacity = 0;
        }
      });
    }

    window.addEventListener('scroll', onScroll, { passive: true });
    update();
  </script>
</body>
</html>
